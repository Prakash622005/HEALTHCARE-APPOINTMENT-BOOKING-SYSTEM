<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Doctor Registration - HABS</title>
    <link rel="stylesheet" href="../static/css/styles.css">
    <style>/* doctor-register.css */
@keyframes slideInRight {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
}

body {
    background: linear-gradient(135deg, #004e92 0%, #000428 100%);
    font-family: 'Poppins', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
}

.container {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
    width: 100%;
    max-width: 500px;
    animation: slideInRight 0.6s ease-out;
    border: 8px solid #c5a059; /* Royal Gold accent */
}

h2 { color: #004e92; text-align: center; margin-bottom: 25px; }

input {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border: 1px solid #ddd;
    border-radius: 8px;
    transition: 0.3s;
    box-sizing: border-box;
}

input:focus {
    border-color: #c5a059;
    box-shadow: 0 0 10px rgba(197, 160, 89, 0.2);
}

button {
    width: 100%;
    padding: 14px;
    background: #004e92;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
    margin-top: 15px;
}

button:hover { background: #003366; transform: translateY(-2px); }

#message { text-align: center; color: #28a745; margin-top: 10px; }</style>
</head>
<body>
<div class="container">
    <h2>Doctor Registration</h2>
    <form id="doctorRegisterForm">
        <input type="text" id="name" placeholder="Full Name" required />
        <input type="email" id="email" placeholder="Email" required />
        <input type="password" id="password" placeholder="Password" required />
        <input type="text" id="specialization" placeholder="Specialization" required />
        <input type="text" id="clinic" placeholder="Clinic / Hospital" />
        <input type="text" id="address" placeholder="Address" />
        <input type="text" id="availableTime" placeholder="Available Time" />
        <input type="number" id="fees" placeholder="Fees" />
        <button type="submit">Register</button>
    </form>
    <div id="message"></div>
    <a href="/login">Back to Login</a>
</div>

<script>
    const form = document.getElementById('doctorRegisterForm');
    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const body = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            password: document.getElementById('password').value,
            specialization: document.getElementById('specialization').value,
            clinic: document.getElementById('clinic').value,
            address: document.getElementById('address').value,
            availableTime: document.getElementById('availableTime').value,
            fees: parseFloat(document.getElementById('fees').value) || 0
        };

        try {
            const res = await fetch('/api/doctors/add', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body)
            });

            const data = await res.json();
            if (res.ok) {
                document.getElementById('message').innerText = 'Doctor registered successfully. Redirecting to login...';
                setTimeout(() => location.href = '/login', 1000);
            } else {
                document.getElementById('message').innerText = 'Registration failed: ' + (data.message || JSON.stringify(data));
            }
        } catch (err) {
            document.getElementById('message').innerText = 'Error: ' + err.message;
        }
    });
</script>
</body>
</html>
