<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Doctor Registration - HABS</title>
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body>
<div class="container">
    <h2>Doctor Registration</h2>
    <form id="doctorRegisterForm">
        <input type="text" id="name" placeholder="Full Name" required />
        <input type="email" id="email" placeholder="Email" required />
        <input type="password" id="password" placeholder="Password" required />
        <input type="text" id="specialization" placeholder="Specialization" required />
        <input type="text" id="clinic" placeholder="Clinic / Hospital" />
        <input type="text" id="address" placeholder="Address" />
        <input type="text" id="availableTime" placeholder="Available Time" />
        <input type="number" id="fees" placeholder="Fees" />
        <button type="submit">Register</button>
    </form>
    <div id="message"></div>
    <a href="login.html">Back to Login</a>
</div>

<script>
    const form = document.getElementById('doctorRegisterForm');
    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const body = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            password: document.getElementById('password').value,
            specialization: document.getElementById('specialization').value,
            clinic: document.getElementById('clinic').value,
            address: document.getElementById('address').value,
            availableTime: document.getElementById('availableTime').value,
            fees: parseFloat(document.getElementById('fees').value) || 0
        };

        try {
            const res = await fetch('/api/doctors/add', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body)
            });

            const data = await res.json();
            if (res.ok) {
                document.getElementById('message').innerText = 'Doctor registered successfully. Redirecting to login...';
                setTimeout(() => location.href = 'login.html', 1000);
            } else {
                document.getElementById('message').innerText = 'Registration failed: ' + (data.message || JSON.stringify(data));
            }
        } catch (err) {
            document.getElementById('message').innerText = 'Error: ' + err.message;
        }
    });
</script>
</body>
</html>
